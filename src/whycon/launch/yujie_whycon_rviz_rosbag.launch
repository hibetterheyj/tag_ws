<launch>
  <!-- ARG -->
  <arg name="name" default="whycon"/>
  <arg name="targets" default="1"/>
  <arg name="base_path" default="$(find whycon)/bags/" />
  <arg name="bag_name" default="whycon_far_0311" />
  <arg name="node_start_delay" default="1.0" />

  <!-- NODE -->
  <node pkg="rosbag" type="play" name="player" output="screen" args="-r 0.8 -l $(arg base_path)$(arg bag_name).bag" />
  <group ns="cv_camera">
    <node pkg="image_proc" type="image_proc" name="image_proc"/>
  </group>

  <node name="whycon" type="whycon" pkg="whycon" output="screen" 
  launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' ">
    <param name="targets" value="$(arg targets)"/>
    <param name="name" value="$(arg name)"/>
    <remap from="/camera/camera_info" to="/cv_camera/camera_info" />
    <remap from="/camera/image_rect_color" to="/cv_camera/image_rect_color" />
  </node>

  <node name="transformer" type="transformer" pkg="whycon" output="screen" 
  launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' " />
  
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find whycon)/launch/whycon.rviz" 
  launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' " />
</launch>
